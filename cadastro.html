<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login / Cadastro | MANTO</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
    }

    .container {
      max-width: 450px;
      margin: 80px auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: #b30000;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      font-weight: 600;
      margin-bottom: 5px;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }

    input[type="submit"] {
      width: 100%;
      padding: 12px;
      background-color: #cc0000;
      color: white;
      border: none;
      font-size: 1.1rem;
      border-radius: 6px;
      cursor: pointer;
    }

    input[type="submit"]:hover {
      background-color: #990000;
    }

    .form-container {
      display: none;
    }

    .form-container.active {
      display: block;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      gap: 10px;
    }

    .tabs button {
      flex: 1;
      padding: 10px;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      background-color: #ddd;
      cursor: pointer;
    }

    .tabs button.active {
      background-color: #b30000;
      color: white;
    }

    .header {
      background-color: white;
      border-bottom: 1px solid #ddd;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.5rem;
      color: #b30000;
      font-weight: bold;
    }

    .navbar .nav-list {
      display: flex;
      list-style: none;
      gap: 15px;
    }

    .nav-list li a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .nav-list li a:hover {
      color: #b30000;
    }

    .icons {
      display: flex;
      gap: 10px;
    }

    .icons a {
      font-size: 20px;
      text-decoration: none;
    }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <header class="header">
    <div class="logo">MANTO</div>
    <nav class="navbar">
      <ul class="nav-list">
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="index.html#produtos">Destaques</a></li>
        <li><a href="index.html#shop">Lan√ßamentos</a></li>
        <li><a href="index.html#Promo√ß√£o">Promo√ß√µes</a></li>
      </ul>
    </nav>
    <div class="icons">
      <a href="carrinho.html" title="Carrinho">üõí</a>
    </div>
  </header>

  <!-- CONTE√öDO -->
  <div class="container">
    <!-- Login -->
    <div id="loginForm" class="form-container active">
      <h1>Login</h1>
      <form id="formLogin" method="POST" action="login.php" onsubmit="return loginUsuario(event)">
        <div class="form-group">
          <label for="email">E-mail</label>
          <input type="email" id="email" name="email" required />
        </div>
        <div class="form-group">
          <label for="senha">Senha</label>
          <input type="password" id="senha" name="senha" required />
        </div>
        <div class="form-group">
          <input type="submit" value="Entrar" />
        </div>
      </form>
    </div>

    <!-- Cadastro -->
    <div id="cadastroForm" class="form-container">
      <h1>Cadastro</h1>
      <form id="formCadastro" method="POST" action="cadastrar.php" onsubmit="return cadastrarUsuario(event)">
        <div class="form-group"><label for="nome">Nome Completo</label><input type="text" id="nome" name="nome" required /></div>
        <div class="form-group"><label for="emailCadastro">E-mail</label><input type="email" id="emailCadastro" name="email" required /></div>
        <div class="form-group"><label for="senhaCadastro">Senha</label><input type="password" id="senhaCadastro" name="senha" required /></div>
        <div class="form-group"><label for="telefone">Telefone</label><input type="text" id="telefone" name="telefone" required /></div>
        <div class="form-group"><label for="cep">CEP</label><input type="text" id="cep" name="cep" required /></div>
        <div class="form-group"><label for="logradouro">Logradouro</label><input type="text" id="logradouro" name="logradouro" required readonly /></div>
        <div class="form-group"><label for="numero">N√∫mero</label><input type="text" id="numero" name="numero" required /></div>
        <div class="form-group"><label for="bairro">Bairro</label><input type="text" id="bairro" name="bairro" required readonly /></div>
        <div class="form-group"><label for="cidade">Cidade</label><input type="text" id="cidade" name="cidade" required readonly /></div>
        <div class="form-group"><label for="estado">Estado</label><input type="text" id="estado" name="estado" required readonly /></div>
        <div class="form-group"><input type="submit" value="Cadastrar" /></div>
      </form>
    </div>

    <!-- Bot√µes -->
    <div class="tabs">
      <button class="active" onclick="showForm('login')">Login</button>
      <button onclick="showForm('cadastro')">Cadastro</button>
    </div>
  </div>

  <script>
    function showForm(formType) {
      const loginForm = document.getElementById('loginForm');
      const cadastroForm = document.getElementById('cadastroForm');
      const loginBtn = document.querySelector('.tabs button:first-child');
      const cadastroBtn = document.querySelector('.tabs button:last-child');

      if (formType === 'login') {
        loginForm.classList.add('active');
        cadastroForm.classList.remove('active');
        loginBtn.classList.add('active');
        cadastroBtn.classList.remove('active');
      } else {
        cadastroForm.classList.add('active');
        loginForm.classList.remove('active');
        cadastroBtn.classList.add('active');
        loginBtn.classList.remove('active');
      }
    }

    async function cadastrarUsuario(event) {
      event.preventDefault();
      const form = document.getElementById('formCadastro');
      const formData = new FormData(form);

      const response = await fetch('cadastrar.php', {
        method: 'POST',
        body: formData
      });

      const result = await response.json();
      alert(result.mensagem);
      if (result.status === 'ok') window.location.href = 'index.html';
    }

    async function loginUsuario(event) {
      event.preventDefault();
      const form = document.getElementById('formLogin');
      const formData = new FormData(form);

      const response = await fetch('login.php', {
        method: 'POST',
        body: formData
      });

      const result = await response.json();
      alert(result.mensagem);
      if (result.status === 'ok') window.location.href = 'index.html';
    }

    // Busca de endere√ßo via CEP (ViaCEP)
    document.getElementById('cep').addEventListener('blur', async () => {
      const cep = document.getElementById('cep').value.replace(/\D/g, '');

      if (cep.length === 8) {
        const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
        const data = await response.json();

        if (!data.erro) {
          document.getElementById('logradouro').value = data.logradouro;
          document.getElementById('bairro').value = data.bairro;
          document.getElementById('cidade').value = data.localidade;
          document.getElementById('estado').value = data.uf;
        } else {
          alert('CEP n√£o encontrado.');
        }
      } else {
        alert('CEP inv√°lido. Digite 8 n√∫meros.');
      }
    });
  </script>
</body>
</html>
